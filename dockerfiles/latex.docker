# Base the image on Ubuntu 20.04 
#FROM ubuntu:20.04 
FROM texlive/texlive 

# Image metadata
LABEL maintainer="alejandro@dpella.io"
LABEL version="0.1"
LABEL description="GHC for development"

# Set the timezone so apt-get doesn't ask for it later
ENV TZ=Europe/Stockholm
RUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime && echo $TZ > /etc/timezone

# Install base system utilities and dependencies
RUN apt-get update
RUN apt-get install -y --no-install-recommends software-properties-common sudo ssh git wget curl make lzma liblzma-dev zlib1g-dev

# Install latex
#RUN apt-get update
#RUN apt-get install -y texlive-full

# Make sure we can clone repos from GitHub via SSH
RUN mkdir ~/.ssh
RUN touch ~/.ssh/known_hosts
RUN ssh-keyscan github.com >> ~/.ssh/known_hosts

# Install powerline, less,vim, and lhs2tex 
RUN apt-get install -y powerline less vim lhs2tex  

# BASHRC for environment variables for GHC and Powerline
COPY ./otherfiles/.bashrc /root/.bashrc

# Move to the root folder
WORKDIR /root

# Copy the entrypoint script and make it the container's entrypoint
COPY ./otherfiles/entrypoint.sh /bin/entrypoint
RUN chmod +x /bin/entrypoint

ENTRYPOINT [ "/bin/entrypoint" ]
